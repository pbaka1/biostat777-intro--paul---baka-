---
title: "Example Analysis"
author: "Paul Worlanyo Baka"
format:
  html:
    df-print: paged
bibliography: references.bib
nocite: |
  @*
---

```{r}
#| label: setup 

#| include: false 

library(tidyverse) 

library(palmerpenguins) 

library(janitor)

 library(lubridate) 

library(gt) 

theme_set(theme_minimal(base_size = 13))


```

::: callout-important
**Question.** How do **species** and **island** relate to **body mass** and **bill measurements** in penguins, and what patterns emerge across **sex**?

**Intended audience.** Public-health and ecology students learning tidy data analysis and visualization who want an approachable, fully reproducible example.
:::

::: column-margin
**Margin note:** The Palmer Archipelago hosts Adelie, Gentoo, and Chinstrap penguins—classic for tidyverse teaching.
:::

-   **Original data:** The palmerpenguins R package provides cleaned measurements of penguins from the Palmer Archipelago, Antarctica \[\@horst2020palmerpenguins\].

    **Where to get it:** CRAN package palmerpenguins.

    **Data dictionary:** https://allisonhorst.github.io/palmerpenguins/reference/penguins.html

    # 

    Minimal Wrangling

```{r}
peng <- penguins |>
  janitor::clean_names() |>                                 # clean_names()  — janitor
  tidyr::drop_na(species, island, sex, body_mass_g,
                 bill_length_mm, bill_depth_mm) |>          # drop_na()     — tidyr
  dplyr::mutate(
    body_mass_kg = body_mass_g / 1000,                      # mutate()      — dplyr
    species = forcats::fct_reorder(species, body_mass_kg, .fun = median)
  ) |>
  dplyr::select(species, island, sex, bill_length_mm,
                bill_depth_mm, body_mass_kg) |>             # select()      — dplyr
  dplyr::arrange(species, island)                           # arrange()     — dplyr

long_bills <- peng |>
  tidyr::pivot_longer(                                      # pivot_longer()— tidyr
    c(bill_length_mm, bill_depth_mm),
    names_to = "bill_metric",
    values_to = "bill_value"
  )
```

# Plot A-Scatter plot

```{r}
ggplot(peng, aes(bill_length_mm, bill_depth_mm, color = species)) +
  geom_point(alpha = 0.7) +                    # geom_point()
  geom_smooth(se = FALSE, method = "loess") +  # geom_smooth()
  labs(
    title = "Bill length vs. depth by species",
    subtitle = "Distinct morphologies separate species in bill space",
    x = "Bill length (mm)",
    y = "Bill depth (mm)",
    caption = "Data: palmerpenguins"
  )
```

# **Plot B- Boxplot (Faceted)**

```{r}
ggplot(peng, aes(species, body_mass_kg, fill = species)) +
  geom_boxplot(outlier.alpha = 0.4) +          # geom_boxplot()
  facet_wrap(~ island) +                       # faceting requirement
  labs(
    title = "Body mass by species, faceted by island",
    subtitle = "Gentoo generally heavier; island context matters",
    x = "Species",
    y = "Body mass (kg)",
    caption = "Data: palmerpenguins"
  ) +
  theme(legend.position = "none")
```

# Plot c -Histogram

```{r}
ggplot(peng, aes(body_mass_kg)) +
  geom_histogram(bins = 25) +                  # geom_histogram()
  labs(
    title = "Distribution of penguin body mass",
    subtitle = "Right-skew with a heavier tail among Gentoo",
    x = "Body mass (kg)",
    y = "Count",
    caption = "Data: palmerpenguins"
  )
```

# External image

![](images/Gentoo.jpeg){fig-cap="Adélie penguin. Source: Wikimedia Commons (CC BY-SA 3.0)." fig-alt="Adélie penguin."}

# Summary Table.

```{r}
summary_tbl <- peng |>
  dplyr::group_by(species, sex) |>          # group_by()
  dplyr::summarise(
    n = dplyr::n(),
    mean_mass = mean(body_mass_kg),
    sd_mass = sd(body_mass_kg),
    .groups = "drop"
  ) |>
  dplyr::arrange(species, sex)

summary_tbl |>
  gt() |>
  tab_header(title = "Body mass summary by species and sex") |>
  fmt_number(columns = c(mean_mass, sd_mass), decimals = 2)
```

::: callout-warning
**Method note.** We removed rows with missing key fields for clarity in visualization. Different imputation choices could be justified for modeling.
:::

::: callout-note
**Interpretation tip.** Species differ strongly in body mass and bill metrics; island strata may mediate distributions.
:::

## **Summary**

The dataset shows clear morphological separation among species, with Gentoo typically heavier and with longer bills than Adelie and Chinstrap. Faceting by island suggests context matters: distributions shift by location, hinting at ecological or sampling differences. Sex also contributes to variance in mass, consistent with mild sexual dimorphism. Together, these patterns are easy to communicate with tidy wrangling and layered graphics.

## **Function checklist**

-   **dplyr:** mutate, select, arrange, group_by, summarise, n

-   **tidyr:** drop_na, pivot_longer

-   **ggplot2:** geom_point, geom_smooth, geom_boxplot, geom_histogram, facet_wrap, plus labs, theme

## **Citations**

We used palmerpenguins \[\@horst2020palmerpenguins\], tidy data manipulation \[\@wickham2014dplyr\], and grammar of graphics \[\@wickham2016ggplot2\].

## References
